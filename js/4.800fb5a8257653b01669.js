webpackJsonp([4],{457:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(488),a=s(519),o=s(210)(i.a,a.a,!1,null,null,null);e.default=o.exports},468:function(t,e,s){"use strict";e.__esModule=!0;var i,a=s(46),o=(i=a)&&i.__esModule?i:{default:i};e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t}},477:function(t,e,s){t.exports={default:s(478),__esModule:!0}},478:function(t,e,s){var i=s(6),a=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},488:function(t,e,s){"use strict";var i=s(477),a=s.n(i),o=s(468),r=s.n(o),n=s(211),l=s(517),c=s(518),u={approvalBy:{name:"ROBERT O. DIZON",position:"Executive Director"},requestedBy:{name:"",position:""},items:[],division:"",purpose:"",remarks:"",classification:{name:""},type:"",section:{code:"",duration:"",leader:"",oded:"",title:""},refNo:"",logs:[],received:"",released:"",prNo:""},d=s.n(c)()();d.postMessage({pro:"val"}),d.onmessage=function(t){console.log(t)},e.a={data:function(){return{uacs:[],plan:{division:"",projectCode:"",projectName:"",projectType:"",fundingAgency:"",year:"",items:[],isProject:!1},isView:!0,tab:"",word:"",requests:[],tempRequest:this.$lodash.clone(u,1),request:this.$lodash.clone(u,1)}},mounted:function(){var t=this;this.requests=this.$dbCon.services.requests.data,this.$dbCon.services.requests.onDataChange(function(e){t.requests=e}),this.uacs=this.$dbCon.services.uacs.data,this.$dbCon.services.uacs.onDataChange(function(e){t.uacs=e,t.$dbCon.services.uacs.loadAllData()})},watch:{"$root.user":function(t){t&&(console.log("DIVISION",this.$root.user.extra_information.division.text),console.log(this.$root.user),this.$dbCon.services.requests.reQuery({query:{division:this.$root.user.extra_information.division.text,$sort:{"logs.0.datetime":-1}}}).then(function(t){console.log("HOOOY",t)}))}},computed:{hasChanges:function(){return this.$difference(this.tempRequest,this.request)},uacsOptions:function(){return this.$lodash.map(this.uacs,function(t){return{label:t.name,description:t.description,value:t}})},filteredItems:function(){if(this.request.classification.coaObjectCode){var t=new RegExp(this.request.classification.coaObjectCode),e=this.$lodash.filter(this.plan.items,function(e){return t.test(e.uacs)});return e}return[]}},methods:{search:function(t){var e=this;this.$dbCon.services.requests.find({query:{$search:""+t,$sort:{"logs.0.datetime":-1}}}).then(function(t){e.requests=t.data}).catch(function(){e.requests=e.$dbCon.services.requests.data})},showRequest:function(t){t.prNo=t.prNo||"",this.isView=!0,this.tempRequest=this.$lodash.cloneDeep(t),this.request=this.$lodash.cloneDeep(t),console.log(t),this.$refs.requestModal.open()},printPR:function(t){Object(l.a)(t,this.$pdfMake)},showNewRequest:function(){this.isView=!1;var t=this;n.Dialog.create({title:"Procurement Plan Ref. Code",form:{refCode:{type:"text",label:"Ref. Code",model:"",required:!0}},buttons:["Cancel",{label:"Search",preventClose:!0,handler:function(e,s){e.refCode?t.$dbCon.services.plans.find({query:{refNo:e.refCode}}).then(function(e){e.total?(t.plan=e.data[0],t.plan.items=t.$lodash.map(e.data[0].items,function(t){return r()({},t,{qty:0})}),s(function(){t.$refs.planItemsModal.open()})):(n.Toast.create.negative({title:"Error",html:"Reference Code not found"}),n.Dialog.create({title:"Error",message:"Reference Code not found"}))}):n.Dialog.create({title:"Error",message:"Ref. Code is empty"})}}]})},addSelectedItems:function(){var t=this,e=this.$lodash.clone(u,1);console.log("plan",this.plan);var s=new RegExp(this.request.classification.coaObjectCode);e.items=this.$lodash.map(this.$lodash.filter(this.plan.items,function(t){return s.test(t.uacs)&&t.qty}),function(t){return r()({description:t.details,cost:t.price},t)}),e.classification=this.request.classification,e.division=this.$root.user.extra_information.division.value||this.$root.user.extra_information.division.text,e.section=this.plan.isProject?{code:this.plan.projectCode}:{name:this.$root.user.extra_information.section.value},e.isProject=this.plan.isProject,e.planRefNo=this.plan.refNo;var i=e.planRefNo.split("-");e.refNo=i[0]+"-"+(this.plan.isProject?i[1]+"-"+i[2]:i[1]),e.logs.push({action:"PR Created",user:{emp_id:this.$root.user.emp_id,email:this.$root.user.personal_information.email,givenName:this.$root.user.personal_information.first_name,mi:this.$root.user.personal_information.middle_name,surname:this.$root.user.personal_information.surname},datetime:this.$moment().format("YYYY-MM-DD HH:mm:ss")}),console.log("request",e),this.$dbCon.services.requests.create(e).then(function(e){n.Toast.create.positive("Plan successfuly added: "+e.refNo),t.$refs.planItemsModal.close()})},logUpdate:function(t){var e=this.hasChanges,s=this.$difference(this.request,this.tempRequest),i={action:t,user:{emp_id:this.$root.user.emp_id,email:this.$root.user.personal_information.email,givenName:this.$root.user.personal_information.first_name,mi:this.$root.user.personal_information.middle_name,surname:this.$root.user.personal_information.surname},datetime:this.$moment().format("YYYY-MM-DD HH:mm:ss"),data:{old:e,update:s}};return this.request.logs&&this.request.logs.push(i),i},updateRquest:function(){var t=this,e=this.logUpdate("PR Updated");e.data.old.prNo&&(e=this.logUpdate("PR No. "+this.request.prNo)),this.$dbCon.services.requests.patch(this.request._id,this.request).then(function(){t.tempRequest=t.$lodash.cloneDeep(t.request),n.Toast.create.positive(t.request.refNo+" successfuly updates: "+a()(e.data)),t.isView=!0})},divRelease:function(){var t=this;this.request.divReleased=this.$moment().format("YYYY-MM-DD HH:mm:ss");var e=this.logUpdate(this.$root.user.extra_information.division.text+" - Released");console.log(e),this.$dbCon.services.requests.patch(this.request._id,this.request).then(function(){t.tempRequest=t.$lodash.cloneDeep(t.request),n.Toast.create.positive(t.request.refNo+" successfuly updates: "+a()(e.data))})},odedRelease:function(){var t=this;this.request.received=this.$moment().format("YYYY-MM-DD HH:mm:ss");var e=this.logUpdate(this.$root.user.extra_information.division.text+" - Released");console.log(e),this.$dbCon.services.requests.patch(this.request._id,this.request).then(function(){t.tempRequest=t.$lodash.cloneDeep(t.request),n.Toast.create.positive(t.request.refNo+" successfuly updates: "+a()(e.data))})},oedRelease:function(){var t=this;this.request.released=this.$moment().format("YYYY-MM-DD HH:mm:ss");var e=this.logUpdate(this.$root.user.extra_information.division.text+" - Released");console.log(e),this.$dbCon.services.requests.patch(this.request._id,this.request).then(function(){t.tempRequest=t.$lodash.cloneDeep(t.request),n.Toast.create.positive(t.request.refNo+" successfuly updates: "+a()(e.data))})}}}},517:function(t,e,s){"use strict";e.a=function(t,e){console.log(e);var i,a,o,r=s(0),n={pageSize:"A4",pageMargins:[40,150,40,200]};n.header=[{fontSize:7,margin:[40,20,40,0],alignment:"right",text:"SMU 011\nREV 4/08-01-13"},{fontSize:9,margin:[40,0,40,0],table:{widths:["*"],body:[[{width:"*",table:{widths:["*"],body:[[{text:"PURCHASE REQUEST",fontSize:12,bold:!0,alignment:"center"}],[{text:"METALS INDUSTRY RESEARCH AND DEVELOPMENT CENTER",bold:!0,alignment:"center"}]]},layout:{hLineColor:"white",vLineColor:"white"}}]]},layout:{hLineColor:function(t,e){return 1===t?"white":"black"}}},{fontSize:9,margin:[40,0,40,0],table:{widths:["*","*","*"],body:[[{text:"DIVISION : "+t.division+"\n\n"},{text:"PR NO. "+(t.prNo||"")+"\n"},{text:"DATE : "+(i=t.logs[0].datetime,a="YYYY-MM-DD HH:mm",o="DD MMMM YYYY",r(i,a).format(o))}],[{text:"SECTION/PROJECT : "+(t.section.code||t.section.name)+"\n\n"},{text:"SAI NO.\n"},""]]},layout:{hLineColor:function(t,e){return 1===t?"white":"black"}}},{fontSize:9,margin:[40,0,40,0],table:{widths:[50,40,"*",50,80,80],body:[[{text:"STOCK No.",alignment:"center"},{text:"UNIT",alignment:"center"},{text:"ITEM DESCRIPTION",alignment:"center"},{text:"QUANTITY",alignment:"center"},{text:"UNIT COST",alignment:"center"},{text:"TOTAL COST",alignment:"center"}]]}}],n.content={fontSize:9,table:{widths:[50,40,"*",50,80,80],body:[]},layout:{hLineColor:function(t,e){return"white"},vLineColor:function(t,e){return"white"}}},t.items.forEach(function(t){n.content.table.body.push([{text:"",alignment:"center"},{text:t.unit,alignment:"center"},[{text:t.name,bold:!0,alignment:"justify"},{text:t.description||"",alignment:"justify"}],{text:t.qty,alignment:"center"},{text:t.cost,alignment:"right"},{text:t.qty*t.cost,alignment:"right"}])}),n.footer=function(e,s){return[{text:"Classification : "+t.classification.name,fontSize:9,margin:[40,0,40,0]},{text:"Remarks : "+t.remarks,fontSize:9,margin:[40,0,40,0]},{text:"Purpose : "+t.purpose,fontSize:9,margin:[40,0,40,0]},"\n\n",{text:"Page "+e+" of "+s+" Page/s\n\n",fontSize:9,alignment:"center",bold:!0,margin:[40,0,40,0]},{fontSize:9,margin:[40,0,40,0],columns:[{width:"auto",table:{widths:["*"],body:[[" "],["Signature"],["Printed Name"],["Designation"]]}},{width:"*",table:{widths:["*"],body:[["Requested by:"],[" "],[{alignment:"center",bold:!0,text:t.requestedBy.name}],[{alignment:"center",text:t.requestedBy.position}]]},layout:{hLineColor:function(t,e){return 1===t||2===t||3===t?"white":"black"}}},{width:"*",table:{widths:["*"],body:[["Approved by:"],[" "],[{alignment:"center",bold:!0,text:t.approvalBy.name}],[{alignment:"center",text:t.approvalBy.position}]]},layout:{hLineColor:function(t,e){return 1===t||2===t||3===t?"white":"black"}}}]},{text:t.refNo+"",fontSize:7,margin:[40,0,40,0],alignment:"right"}]},console.log(n),e.createPdf(n).open()}},518:function(t,e,s){t.exports=function(){return new Worker(s.p+"8bcf90bf80a05df7bb6e.worker.js")}},519:function(t,e,s){"use strict";var i={render:function(){var t=this,e=this,s=e.$createElement,i=e._self._c||s;return i("div",[i("q-toolbar",{staticClass:"shadow-3",attrs:{slot:"header"},slot:"header"},[i("q-toolbar-title",[e._v("\n      Requests list\n    ")]),e._v(" "),i("q-search",{attrs:{inverted:"",color:"none"},on:{change:function(t){e.search(e.word)}},model:{value:e.word,callback:function(t){e.word=t},expression:"word"}})],1),e._v(" "),i("div",{staticClass:"layout-padding col",staticStyle:{"max-height":"calc(100vh - 100px)",overflow:"auto"}},[e.$root.user?e._e():i("h1",[e._v("Unauthorized. Please log in!")]),e._v(" "),i("div",{staticClass:"row wrap"},e._l(e.requests,function(t){return e.$root.user?i("q-card",{key:t._id,staticClass:"bigger",attrs:{inline:""}},[i("q-card-title",[e._v("\n          "+e._s(t.refNo)+"\n          "),i("div",{attrs:{slot:"right"},slot:"right"},[i("q-btn",{attrs:{color:"primary",flat:"",small:""},on:{click:function(s){e.showRequest(t)}}},[e._v("View / Edit")]),e._v(" "),i("q-btn",{attrs:{color:"negative",flat:"",round:"",small:"",icon:"delete"}})],1)]),e._v(" "),i("q-card-main",[i("span",[e._v("Items: "+e._s(t.items.length))]),e._v(" "),i("br")]),e._v(" "),i("q-card-separator"),e._v(" "),i("q-card-actions",{staticClass:"row bg-light"},[i("div",{staticClass:"col"},[i("span",[e._v("  "+e._s(t.prNo?"PR. No: "+t.prNo:""))])]),e._v(" "),i("div",{staticClass:"row pull-right"},[e._v("\n                   \n              "),i("q-icon",{staticClass:"text-faded",attrs:{name:"update",size:"24px"}}),e._v(" "),i("span",[e._v("  "+e._s(t.logs[0].datetime))])],1)])],1):e._e()})),e._v(" "),i("q-fixed-position",{directives:[{name:"show",rawName:"v-show",value:e.$root.user,expression:"$root.user"}],attrs:{corner:"bottom-right",offset:[18,18]}},[i("q-btn",{staticClass:"animate-pop",attrs:{round:"",color:"primary",icon:"add"},on:{click:e.showNewRequest}})],1)],1),e._v(" "),i("q-modal",{ref:"requestModal",attrs:{"no-backdrop-dismiss":"","content-css":{minWidth:"65vw",minHeight:"65vh"}}},[e.$root.user?i("q-modal-layout",{attrs:{view:"lHh LpR lFf"}},[i("q-toolbar",{attrs:{slot:"header"},slot:"header"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isView,expression:"isView"}],attrs:{round:"",small:"",flat:"",icon:"arrow back"},on:{click:function(t){e.$refs.requestModal.close()}}}),e._v(" "),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.isView,expression:"!isView"}],attrs:{round:"",small:"",flat:"",icon:"arrow back"},on:{click:function(t){e.isView=!0,e.request=e.$lodash.cloneDeep(e.tempRequest)}}}),e._v(" "),i("div",{staticClass:"q-toolbar-title"},[e._v("\n          "+e._s(this.request.refNo)+" "),i("span",{directives:[{name:"show",rawName:"v-show",value:this.request.prNo,expression:"this.request.prNo"}]},[e._v("("+e._s(this.request.prNo)+")")])]),e._v(" "),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isView,expression:"isView"}],attrs:{round:"",small:"",flat:"",icon:"edit"},on:{click:function(t){e.isView=!e.isView}}}),e._v(" "),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isView,expression:"isView"}],attrs:{round:"",small:"",flat:"",icon:"picture as pdf"},on:{click:function(t){e.printPR(e.request)}}}),e._v(" "),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.isView,expression:"!isView"}],attrs:{flat:"",icon:"save",disable:e.$lodash.isEmpty(e.hasChanges)},on:{click:e.updateRquest}},[e._v("save   ")]),e._v(" "),e.isView&&e.request.division===(this.$root.user.extra_information.division.text||this.$root.user.extra_information.division)?i("q-btn",{attrs:{icon:"insert drive file",disable:!e.$lodash.isEmpty(e.request.divReleased)},on:{click:e.divRelease}},[e._v("\n            "+e._s(this.$root.user.extra_information.division.text||this.$root.user.extra_information.division)+"\n            Release  \n        ")]):e._e(),e._v(" "),e.isView&&-1!==["ODED-RD","ODED-TS"].indexOf(this.$root.user.extra_information.section.text||this.$root.user.extra_information.section)?i("q-btn",{attrs:{icon:"insert drive file",disable:e.$lodash.isEmpty(e.request.divReleased)||!e.$lodash.isEmpty(e.request.received)},on:{click:e.odedRelease}},[e._v("\n            "+e._s(this.$root.user.extra_information.section.text||this.$root.user.extra_information.section)+"\n            Release  \n        ")]):e._e(),e._v(" "),e.isView&&"OED"===(this.$root.user.extra_information.section.text||this.$root.user.extra_information.section)?i("q-btn",{attrs:{icon:"insert drive file",disable:e.$lodash.isEmpty(e.request.received)||!e.$lodash.isEmpty(e.request.released)},on:{click:e.oedRelease}},[e._v("\n            "+e._s(this.$root.user.extra_information.division.text)+"\n            Release  \n        ")]):e._e()],1),e._v(" "),i("q-toolbar",{staticStyle:{height:"72px"},attrs:{slot:"header"},slot:"header"},[i("q-tabs",{staticClass:"bg-red full-width",attrs:{align:"justify"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[i("q-tab",{attrs:{slot:"title",name:"details",label:"details",icon:"info",default:""},slot:"title"}),e._v(" "),i("q-tab",{attrs:{slot:"title",name:"items",label:"items",icon:"list",count:e.request.items.length},slot:"title"}),e._v(" "),i("q-tab",{attrs:{slot:"title",name:"logs",label:"progress",icon:"library books"},slot:"title"})],1)],1),e._v(" "),"details"===e.tab?i("div",{staticClass:"layout-padding col"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-field",{attrs:{icon:"branding watermark"}},[i("q-input",{attrs:{readonly:"","float-label":"Division"},model:{value:e.request.division,callback:function(t){e.$set(e.request,"division",t)},expression:"request.division"}})],1),e._v(" "),i("q-field",{attrs:{icon:"picture in picture alt"}},[e.request.section.name?i("q-input",{attrs:{readonly:"","float-label":"Section"},model:{value:e.request.section.name,callback:function(t){e.$set(e.request.section,"name",t)},expression:"request.section.name"}}):e._e(),e._v(" "),e.request.section.code?i("q-input",{attrs:{readonly:"","float-label":"Project"},model:{value:e.request.section.code,callback:function(t){e.$set(e.request.section,"code",t)},expression:"request.section.code"}}):e._e()],1)],1),e._v(" "),i("div",{staticClass:"col"},[i("q-field",{attrs:{icon:"today"}},[e.request.logs[0]?i("q-input",{attrs:{readonly:"",value:e.$moment(e.request.logs[0].datetime).format("DD MMMM YYYY"),"float-label":"Date created"}}):e._e()],1),e._v(" "),i("q-field",{attrs:{icon:"code",error:!e.request.prNo,"error-label":"Not yet assigned"}},[i("q-input",{attrs:{readonly:e.isView||"SMU"!==this.$root.user.extra_information.section.text||e.$lodash.isEmpty(e.request.released),"float-label":"PR No."},model:{value:e.request.prNo,callback:function(t){e.$set(e.request,"prNo",t)},expression:"request.prNo"}})],1)],1)]),e._v(" "),i("div",{staticClass:"col"},[i("q-field",{attrs:{icon:"donut large",error:!e.request.purpose,"error-label":"Required field"}},[i("q-input",{attrs:{readonly:e.isView,"float-label":"Purpose"},model:{value:e.request.purpose,callback:function(t){e.$set(e.request,"purpose",t)},expression:"request.purpose"}})],1),e._v(" "),i("q-field",{attrs:{icon:"dns"}},[i("q-input",{attrs:{readonly:"","float-label":"Classification"},model:{value:e.request.classification.name,callback:function(t){e.$set(e.request.classification,"name",t)},expression:"request.classification.name"}})],1),e._v(" "),i("q-field",{attrs:{icon:"comment"}},[i("q-input",{attrs:{readonly:e.isView,"float-label":"Remarks",type:"textarea"},model:{value:e.request.remarks,callback:function(t){e.$set(e.request,"remarks",t)},expression:"request.remarks"}})],1)],1),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("p",{staticClass:"caption"},[e._v("Requested by")]),e._v(" "),i("q-field",{attrs:{icon:"person outline",error:!e.request.requestedBy.name,"error-label":"Required field"}},[i("q-input",{attrs:{readonly:e.isView,"float-label":"Name"},model:{value:e.request.requestedBy.name,callback:function(t){e.$set(e.request.requestedBy,"name",t)},expression:"request.requestedBy.name"}})],1),e._v(" "),i("q-field",{attrs:{icon:"assignment ind",error:!e.request.requestedBy.position,"error-label":"Required field"}},[i("q-input",{attrs:{readonly:e.isView,"float-label":"Position"},model:{value:e.request.requestedBy.position,callback:function(t){e.$set(e.request.requestedBy,"position",t)},expression:"request.requestedBy.position"}})],1)],1),e._v(" "),i("div",{staticClass:"col"},[i("p",{staticClass:"caption"},[e._v("Approval by")]),e._v(" "),i("q-field",{attrs:{icon:"person",error:!e.request.approvalBy.name,"error-label":"Required field"}},[i("q-input",{attrs:{readonly:e.isView,"float-label":"Name"},model:{value:e.request.approvalBy.name,callback:function(t){e.$set(e.request.approvalBy,"name",t)},expression:"request.approvalBy.name"}})],1),e._v(" "),i("q-field",{attrs:{icon:"assignment ind",error:!e.request.approvalBy.position,"error-label":"Required field"}},[i("q-input",{attrs:{readonly:e.isView,"float-label":"Position"},model:{value:e.request.approvalBy.position,callback:function(t){e.$set(e.request.approvalBy,"position",t)},expression:"request.approvalBy.position"}})],1)],1)])]):"items"===e.tab?i("div",{staticClass:"col"},[i("q-list",e._l(e.request.items,function(t,s){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,attrs:{multiline:""}},[i("q-item-side",{attrs:{avatar:""}},[e._v(e._s(s+1))]),e._v(" "),i("q-item-main",[i("q-item-tile",{attrs:{label:"",lines:"1"}},[e._v(e._s(t.name))]),e._v(" "),i("q-item-tile",{attrs:{sublabel:"",lines:"2"}},[i("q-input",{attrs:{readonly:e.isView,type:"textarea"},model:{value:t.description,callback:function(s){e.$set(t,"description",s)},expression:"item.description"}})],1)],1),e._v(" "),i("q-item-side",{attrs:{right:""}},[i("q-item-tile",{attrs:{stamp:""}},[e._v("Qty: "+e._s(t.qty)+" | Unit: "+e._s(t.unit))]),e._v(" "),i("q-item-tile",{attrs:{stamp:""}},[e._v("Cost: "+e._s(t.cost))]),e._v(" "),i("q-item-tile",{attrs:{label:""}},[e._v(e._s((t.qty*t.cost).toFixed(2)))]),e._v(" "),i("q-item-tile",{attrs:{label:""}},[e._v(e._s(99.995.toFixed(2)))])],1),e._v(" "),e.isView?e._e():i("q-item-side",{attrs:{right:""}},[i("div",{staticClass:"row justify-center",staticStyle:{"min-width":"64px","max-width":"170px"}},[i("div",{staticClass:"row"},[i("q-btn",{staticStyle:{width:"0px"},attrs:{small:"",flat:"",color:"primary",disable:t.qty<1},on:{click:function(e){t.qty=0}}},[i("q-icon",{attrs:{name:"first page"}})],1),e._v(" "),i("q-btn",{staticStyle:{width:"0px"},attrs:{small:"",flat:"",color:"primary",disable:t.qty<1},on:{click:function(e){t.qty--}}},[i("q-icon",{attrs:{name:"keyboard arrow left"}})],1)],1),e._v(" "),i("q-input",{staticStyle:{width:"42px"},attrs:{type:"number",align:"center",min:0,max:e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization)},on:{change:function(s){var i=e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization);t.qty=s>i?i:s<0?0:s}},model:{value:t.qty,callback:function(s){e.$set(t,"qty",s)},expression:"item.qty"}}),e._v(" "),i("div",{staticClass:"row"},[i("q-btn",{staticStyle:{width:"0px"},attrs:{small:"",flat:"",color:"primary",disable:t.qty>=e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization)},on:{click:function(e){t.qty++}}},[i("q-icon",{attrs:{name:"keyboard arrow right"}})],1),e._v(" "),i("q-btn",{staticStyle:{width:"0px"},attrs:{small:"",flat:"",color:"primary",disable:t.qty>=e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization)},on:{click:function(s){t.qty=e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization)}}},[i("q-icon",{attrs:{name:"last page"}})],1)],1)],1)])],1)}))],1):"logs"===e.tab?i("div",{staticClass:"col"},[i("q-list",e._l(e.request.logs,function(t,s){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,attrs:{multiline:""}},[i("q-item-side",{attrs:{avatar:""}},[e._v(e._s(s+1))]),e._v(" "),i("q-item-main",[i("q-item-tile",{attrs:{label:"",lines:"1"}},[e._v(e._s(t.action))]),e._v(" "),i("q-item-tile",{attrs:{sublabel:"",lines:"2"}},[i("span",[e._v(e._s(t.user.email))])])],1),e._v(" "),i("q-item-side",{attrs:{right:""}},[i("q-item-tile",{attrs:{stamp:""}},[e._v(e._s(t.datetime))]),e._v(" "),e.request.logs[s-1]?i("q-item-tile",[e._v(e._s(e.$moment(t.datetime).diff(e.$moment(e.request.logs[s-1].datetime).format("YYYYMMDD"),"days")))]):e._e()],1)],1)}))],1):e._e()],1):e._e()],1),e._v(" "),i("q-modal",{ref:"planItemsModal",attrs:{"content-css":{minWidth:"65vw",minHeight:"65vh"}}},[i("q-modal-layout",[i("q-toolbar",{attrs:{slot:"header"},slot:"header"},[i("q-btn",{attrs:{round:"",small:"",flat:"",icon:"arrow back"},on:{click:function(t){e.$refs.planItemsModal.close()}}}),e._v(" "),i("div",{staticClass:"q-toolbar-title"},[e._v("\n          Plan "+e._s(e.plan.refNo)+"\n        ")]),e._v(" "),i("q-select",{staticStyle:{width:"200px"},attrs:{inverted:"",color:"secondary",filter:"","float-label":"UACS / Classification",options:e.uacsOptions},model:{value:e.request.classification,callback:function(t){e.$set(e.request,"classification",t)},expression:"request.classification"}}),e._v(" "),i("q-btn",{attrs:{icon:"add shopping cart",color:"secondary",disabled:0===this.$lodash.filter(this.plan.items,function(e){return new RegExp(t.request.classification.coaObjectCode).test(e.uacs)&&e.qty}).length},on:{click:e.addSelectedItems}},[e._v("Add Selected")])],1),e._v(" "),i("div",{},[i("q-list",{attrs:{highlight:""}},e._l(e.filteredItems,function(t,s){return i("q-item",{key:s},[i("q-item-side",[e._v(e._s(s+1))]),e._v(" "),i("q-item-side",[e._v(e._s(t.unit))]),e._v(" "),i("q-item-main",[i("q-item-tile",{attrs:{label:""}},[e._v(e._s(t.name))]),e._v(" "),i("q-item-tile",{attrs:{sublabel:""}},[e._v(e._s(t.details))]),e._v(" "),i("q-item-tile",{attrs:{sublabel:""}},[e._v(e._s(t.uacs)+" | "+e._s(t.cseclassification))])],1),e._v(" "),i("q-item-side",{attrs:{right:""}},[i("q-item-tile",[e._v(e._s(t.price))]),e._v(" "),i("q-item-tile",[e._v(e._s(t.unit))])],1),e._v(" "),i("q-item-side",{attrs:{right:""}},[i("q-item-tile",[i("div",{staticClass:"row justify-center",staticStyle:{"min-width":"64px","max-width":"170px"}},[i("div",{staticClass:"row"},[i("q-btn",{staticStyle:{width:"0px"},attrs:{small:"",flat:"",color:"primary",disable:t.qty<1},on:{click:function(e){t.qty=0}}},[i("q-icon",{attrs:{name:"first page"}})],1),e._v(" "),i("q-btn",{staticStyle:{width:"0px"},attrs:{small:"",flat:"",color:"primary",disable:t.qty<1},on:{click:function(e){t.qty--}}},[i("q-icon",{attrs:{name:"keyboard arrow left"}})],1)],1),e._v(" "),i("q-input",{staticStyle:{width:"42px"},attrs:{type:"number",align:"center",min:0,max:e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization)},on:{change:function(s){var i=e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization);t.qty=s>i?i:s<0?0:s}},model:{value:t.qty,callback:function(s){e.$set(t,"qty",s)},expression:"item.qty"}}),e._v(" "),i("div",{staticClass:"row"},[i("q-btn",{staticStyle:{width:"0px"},attrs:{small:"",flat:"",color:"primary",disable:t.qty>=e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization)},on:{click:function(e){t.qty++}}},[i("q-icon",{attrs:{name:"keyboard arrow right"}})],1),e._v(" "),i("q-btn",{staticStyle:{width:"0px"},attrs:{small:"",flat:"",color:"primary",disable:t.qty>=e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization)},on:{click:function(s){t.qty=e.$lodash.sum(t.quantityRequirement)-e.$lodash.sum(t.utilization)}}},[i("q-icon",{attrs:{name:"last page"}})],1)],1)],1)])],1)],1)}))],1)],1)],1)],1)},staticRenderFns:[]};e.a=i}});